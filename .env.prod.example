# WorkShelf Production Environment Template (DO NOT PUT REAL SECRETS HERE)
# Copy to a secure location or inject via AWS (SSM / Secrets Manager / ECS Task Definition)
# Replace PLACEHOLDER_* values outside of version control.

# =====================
# Database (Neon Postgres)
# =====================
DATABASE_URL=postgresql://neondb_owner:PLACEHOLDER_DB_PASSWORD@ep-your-neon-host.neon.tech/neondb?sslmode=require
DATABASE_HOST=ep-your-neon-host.neon.tech
DATABASE_PORT=5432
DATABASE_NAME=neondb
DATABASE_USER=neondb_owner
DATABASE_PASSWORD=PLACEHOLDER_DB_PASSWORD
DATABASE_SSL=true

# =====================
# Keycloak Auth
# =====================
KEYCLOAK_SERVER_URL=https://keycloak.workshelf.dev
KEYCLOAK_INTERNAL_URL=http://keycloak:8080
KEYCLOAK_REALM=workshelf
KEYCLOAK_CLIENT_ID=workshelf-api
KEYCLOAK_CLIENT_SECRET=PLACEHOLDER_KEYCLOAK_CLIENT_SECRET
KEYCLOAK_ADMIN_USER=PLACEHOLDER_ADMIN_USER
KEYCLOAK_ADMIN_PASSWORD=PLACEHOLDER_ADMIN_PASSWORD

# =====================
# Matrix / Synapse
# =====================
MATRIX_HOMESERVER=https://matrix.workshelf.dev
MATRIX_PUBLIC_HOMESERVER=https://workshelf.dev
MATRIX_REGISTRATION_SHARED_SECRET=PLACEHOLDER_MATRIX_SHARED_SECRET
MATRIX_ADMIN_ACCESS_TOKEN=PLACEHOLDER_MATRIX_ADMIN_TOKEN

# =====================
# Redis
# =====================
REDIS_URL=redis://redis:6379

# =====================
# MinIO / Object Storage (Legacy - use S3 instead)
# =====================
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=PLACEHOLDER_MINIO_ACCESS_KEY
MINIO_SECRET_KEY=PLACEHOLDER_MINIO_SECRET_KEY
MINIO_BUCKET=workshelf
MINIO_SECURE=true

# =====================
# S3-Compatible Document Storage
# =====================
# For AWS S3: Leave S3_ENDPOINT_URL empty
# For MinIO: Set to http://minio:9000
# For Cloudflare R2: Set to https://ACCOUNT_ID.r2.cloudflarestorage.com
S3_ENDPOINT_URL=
S3_ACCESS_KEY_ID=PLACEHOLDER_S3_ACCESS_KEY
S3_SECRET_ACCESS_KEY=PLACEHOLDER_S3_SECRET_KEY
S3_BUCKET_NAME=workshelf-documents
S3_REGION=us-east-1

# =====================
# Observability / Sentry / PostHog / Unleash (optional)
# =====================
SENTRY_DSN=PLACEHOLDER_SENTRY_DSN
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318
OTEL_SERVICE_NAME=workshelf-backend
UNLEASH_URL=https://admin.workshelf.dev/unleash
UNLEASH_API_TOKEN=PLACEHOLDER_UNLEASH_TOKEN
POSTHOG_KEY=PLACEHOLDER_POSTHOG_KEY
POSTHOG_HOST=https://us.i.posthog.com

# =====================
# AWS (prefer task role instead of static keys)
# =====================
AWS_REGION=us-east-1
# Avoid embedding AWS_ACCESS_KEY_ID / AWS_SECRET_ACCESS_KEY in env; use IAM roles.

# =====================
# Security Secrets (rotate if exposed)
# =====================
SECRET_KEY=PLACEHOLDER_FASTAPI_SECRET_KEY
JWT_SECRET=PLACEHOLDER_JWT_SECRET
ENCRYPTION_KEY=PLACEHOLDER_ENCRYPTION_KEY
SESSION_SECRET=PLACEHOLDER_SESSION_SECRET

# =====================
# CORS
# =====================
CORS_ORIGIN=https://workshelf.dev,https://admin.workshelf.dev

# =====================
# Frontend Build Vars
# =====================
VITE_API_URL=https://api.workshelf.dev
VITE_KEYCLOAK_URL=https://keycloak.workshelf.dev
VITE_KEYCLOAK_REALM=workshelf
VITE_KEYCLOAK_CLIENT_ID=workshelf-frontend
VITE_MATRIX_HOMESERVER=https://workshelf.dev
VITE_HOCUSPOCUS_URL=wss://collab.workshelf.dev
VITE_SENTRY_DSN=PLACEHOLDER_SENTRY_DSN
VITE_POSTHOG_KEY=PLACEHOLDER_POSTHOG_KEY
VITE_POSTHOG_HOST=https://us.i.posthog.com

# =====================
# Environment
# =====================
ENVIRONMENT=production

# =====================
# Notes
# =====================
# 1. Real secrets go in AWS Secrets Manager or SSM Param Store and are injected at runtime.
# 2. Never commit the real production .env file.
# 3. Rotate any secret that has appeared in chat or version control.
# 4. Keep local dev in .env (gitignored) using localhost URLs.
